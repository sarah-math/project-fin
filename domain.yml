version: "2.0"

intents:
- greet
- goodbye
- affirm
- deny
- mood_great
- mood_unhappy
- bot_challenge
- nlu_fallback
- out_of_scope
- thankyou
- help  
- ask_transfer_charge
- transfer_money
- check_recipients
  

entities:
  - PERSON
  - amount-of-money
  - time
  - number
  - account_type
  - credit_card

slots:
  PERSON:
    type: text
    auto_fill: false

  PERSON_transfer: 
    type: text
    auto_fill: true

  amount-of-money:
    type: any
    auto_fill: true

  confirmation: 
    type: any
    auto_fill: false

  AA_CONTINUE_FORM:
    type: any

  amount_transferred:
    type: any
    initial_value: 0

  
  credit_card:
    type: any
    influence_conversation: false
  currency:
    type: any
    influence_conversation: false
    initial_value: "$"
  account_type:
    type: any
    influence_conversation: false


responses:
  utter_ask_PERSON_form_PERSON:
  - text: HI, i'm FINA, What is your name?

  utter_greet_by_name:
  - text: hello {PERSON}, how can i help you?

  utter_did_that_help:
  - text: "Did that help you?"

  utter_goodbye:
  - text: "Bye"

  utter_iamabot:
  - text: "I am a bot, My name is FINA."

  utter_default:
  - text: I didn't quite understand that. Could you rephrase?

  utter_out_of_scope:
  - text: Sorry, I'm not sure how to respond to that. Type "help" for assistance.

  utter_noworries:
  - text: You're welcome :)

  utter_help:
  - text: "I can help you with your financial accounts. \nYou can ask me things like:\
      \ \n- What's my account balance? \n- Pay off my credit card \n- What did I spend\
      \ at Target last month? \n- I need to transfer money"


  utter_transfer_charge:
  - text: You are entitled to six transfers within a statement cycle before being
      charged. For subsequent transfers you will be charged {currency} 10 per transaction.

  utter_ask_transfer_money_form_amount-of-money:
  - text: How much money do you want to transfer?
 
  utter_ask_transfer_money_form_PERSON_transfer:
  - text: Who do you want to transfer money to?
  
  utter_ask_transfer_money_form_AA_CONTINUE_FORM:
    - buttons:
      - payload: /affirm
        title: Yes
      - payload: /deny
        title: No, cancel the transfer
      text: Would you like to continue scheduling the money transfer?

  utter_ask_transfer_money_form_confirmation:
    - buttons:
      - payload: /affirm
        title: Yes
      - payload: /deny
        title: No, cancel the transaction
      text: Would you like to transfer {amount-of-money} to {PERSON_transfer}?

  utter_transfer_cancelled:
  - text: Transfer cancelled.

  utter_transfer_complete:
  - text: Successfully transferred {amount-of-money} to {PERSON_transfer}.

  utter_recipients:
  - text: These are your known recpients to whom you can send money:{formatted_recipients}

  utter_credit_card_balance:
  - text: The current balance for your {credit_card} account is {currency}{credit_card_balance}.

  utter_account_balance:
  - text: Your bank account balance is {currency}{init_account_balance}.


actions:
- action_transfer_money
- action_show_recipients
- action_show_transfer_charge
- action_show_balance

forms:
  
  transfer_money_form: 
    AA_CONTINUE_FORM:
    - type: from_intent
      intent: affirm
      value: yes
    - type: from_intent
      intent: deny
      value: no
    
    
    PERSON_transfer:
      - type: from_entity
        entity: PERSON

    amount-of-money:
      - type: from_entity
        entity: amount-of-money

    confirmation: 
      - type: from_intent
        intent: affirm
        value: yes
      - type: from_intent
        intent: deny
        value: no


  PERSON_form:
    PERSON:
      - type: from_entity
        entity: PERSON
        not intent: transfer_money


session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
